<section>
  <% if HighSchoolTeam.all.count + ClubTeam.all.count < 2 %>
    <p>You neeed at least two teams to create a game. Create more high school and/or club teams first.</p>
  <% else %>
    <section class="game-form">
      <section class="form-group">
        <%= f.label :team_one %>
        <%= f.select :team_one_id, nil, {}, class: "team-one-dropdown form-control" do %>
          <optgroup label="High School Teams">
            <% HighSchoolTeam.all.each do |high_school_team| %>
              <option
                value="high-school-team:<%= high_school_team.id %>"
                <%= "selected" if game.try(:team_one) === high_school_team %>
              >
                <%= high_school_team.school_name %>
              </option>
            <% end %>
          </optgroup>
          <optgroup label="Club Teams">
            <% ClubTeam.all.each do |club_team| %>
              <option
                value="club-team:<%= club_team.id %>"
                <%= "selected" if game.try(:team_one) === club_team %>
              >
                <%= club_team.name %>
              </option>
            <% end %>
          </optgroup>
        <% end %>
      </section>

      <section class="form-group">
        <%= f.label :team_two %>
        <%= f.select :team_two_id, nil, {}, class: "team-two-dropdown form-control" do %>
          <optgroup label="High School Teams">
            <% HighSchoolTeam.all.each do |high_school_team| %>
              <option
                value="high-school-team:<%= high_school_team.id %>"
                <%= "selected" if game.try(:team_two) === high_school_team %>
              >
                <%= high_school_team.school_name %>
              </option>
            <% end %>
          </optgroup>
          <optgroup label="Club Teams">
            <% ClubTeam.all.each do |club_team| %>
              <option
                value="club-team:<%= club_team.id %>"
                <%= "selected" if game.try(:team_two) === club_team %>
              >
                <%= club_team.name %>
              </option>
            <% end %>
          </optgroup>
        <% end %>
      </section>

      <section class="form-group">
        <%= f.label :field %>
        <%= f.collection_select(:field_id, Field.all, :id, :name, {}, class: "form-control") %>
      </section>

      <section class="form-group">
        <%= f.label :date %>
        <%= f.date_field :date, class: "form-control" %>
      </section>

      <section class="form-group">
        <%= f.label :start_time %>
        <%= f.time_field :start_time, class: "form-control" %>
      </section>
    </section>
  <% end %>
</section>
